---
// import type { APIRoute } from "astro";
import { app } from "../../../firebase/server";
import { getFirestore } from "firebase-admin/firestore";

export const GET: APIRoute = async ({
  params,
  request,
  redirect,
  cookies,
}) => {
    return new Response(request.id, { status: 300 });
}

export async function discord_data(data : string) {
    const db = getFirestore(app);
    const docRef = db.collection("user").doc(data);
    const getdata = await docRef.get();
    return(getdata.data())
}
export async function registerUser([data,id] : [any,string]) {
    const db = getFirestore(app);
    const docRef = db.collection("user").doc(id);
    await docRef.set({
        ["newuser"]: false,
        ["certificate_name"]: data.name,
        ["communicate_email"]: data.email,
        // github: data,
        // twitter: data,
        // linkedin: data,
        // bio: data,
        // projects: data,
        // skills: data,
        // interests: data,
        // location: data,
        // timezone: data,
        // pronouns: data,
        // avatar: data,
        // banner: data,
        // website: data,
    },{merge: true});
}
---