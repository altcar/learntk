---
console.log(Astro.cookies.get("discord")?.value)
// console.log(JSON.parse(Astro.cookies.get("discord")?.value))
if (Astro.cookies.get("discord")?.value != undefined) {
  var detail = JSON.parse(Astro.cookies.get("discord")?.value ?? "{}");
  if (detail.subscribed) {
    return Astro.redirect(`/api/auth/dcreply?id=${detail.discord_id}`);
  } else {
    return Astro.redirect("https://learntk-auth.vercel.app/auth/discord");
  }
}else{
    return Astro.redirect("https://learntk-auth.vercel.app/auth/discord");
}
// var detail = (Astro.cookies.get("discord")?.value ?? "")? JSON.parse(detail): {subscribed: false};
// console.log((detail))




---

